#!/bin/sh

DJANGODIR={{ src_dir }}
export PYTHON_EGG_CACHE=/tmp

# Activate the virtual environment.
cd $DJANGODIR
. {{ venv_dir }}/bin/activate
# . {{ venv_dir }}/bin/postactivate   Not using env variables for now

# Programs meant to be run under supervisor should not daemonize themselves
# (do not use --daemon).
exec celery -A {{ project_name }} worker -E -l info --concurrency={{ celery_num_workers }}